{"version":3,"file":"js/136.6f0b604c.js","mappings":"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","sources":["webpack://vue_week6/./node_modules/mitt/dist/mitt.mjs","webpack://vue_week6/./src/libs/emitter.js","webpack://vue_week6/./src/views/CartView.vue","webpack://vue_week6/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\n\nconst emitter = mitt()\nexport default emitter\n","<template>\n  <div class=\"container\">\n    <h2>shopping cart list</h2>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"product in products\" :key=\"product.id\">\n          <td style=\"width: 200px\">\n            <div\n              :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n            ></div>\n          </td>\n          <td>\n            {{ product.title }}\n          </td>\n          <td>\n            <!-- 原價及折扣價一樣時，只顯示單一價格 -->\n            <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n              {{ product.price }} 元\n            </div>\n            <div v-else>\n              <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"openProductModal(product.id)\"\n                :disabled=\"isLoadingItem === product.id\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === product.id\"\n                ></i>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(product.id)\"\n                :disabled=\"isLoadingItem === product.id\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === product.id\"\n                ></i>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\nexport default {\n  data () {\n    return {\n      cartData: {\n        carts: [] // 清空購物車時需要\n      }, // 購物車列表\n      products: [], // 產品列表\n      isLoadingItem: ''\n    }\n  },\n  methods: {\n    getProducts () {\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((res) => {\n          // console.log(res);\n          this.products = res.data.products\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    },\n    addToCart (id, qty = 1) { // 加入購物車，要記得把 id 跟 qty（數量）加入\n      const data = { // 建構資料格式\n        product_id: id,\n        qty\n      }\n      this.isLoadingItem = id\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data })\n        .then((res) => {\n          // console.log(res);\n          // this.getCart() // 加入購物車後，再重新取得購物車內容\n          // this.$refs.productModal.closeModal() // 使用 ref 關閉 modal\n          this.isLoadingItem = '' // 加入購物車後，把 id 清空\n          // 匯入 emitter 的 get-cart\n          emitter.emit('get-cart')\n        })\n        .catch((err) => {\n          alert(err.data.message)\n        })\n    }\n  },\n  mounted () {\n    this.getProducts()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=7d0bdfaa\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/carol/Hex-Vue/homework/vue_cli/vue_week6/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","_createElementVNode","style","_createElementBlock","_hoisted_2","_hoisted_4","_Fragment","_renderList","$data","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_7","type","onClick","_ctx","disabled","$options","data","cartData","carts","products","isLoadingItem","methods","getProducts","this","$http","then","res","catch","err","alert","message","addToCart","qty","product_id","post","mounted","__exports__","render"],"sourceRoot":""}